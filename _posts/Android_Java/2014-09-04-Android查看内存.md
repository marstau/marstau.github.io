---
layout: post
title: Android查看内存
category: 编程开发
tags: android／java
keywords: 
description: 
---

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:13px;line-height:20px;"><span
style="color:#003366;line-height:23px;">From:
<http://blog.csdn.net/hudashi/article/details/7050897></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:13px;line-height:20px;"><span
style="color:#003366;line-height:23px;"></span></span> 

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:13px;line-height:20px;"><span
style="color:#003366;line-height:23px;">像Linux这种现代操作系统的内存使用是很复杂的，因此很难准确的知道你的应用程序使用了好多内存。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#ff6600;line-height:21px;">查看内存使用的方式有很多种，但是各个方式查看到的结果可能会有微略不同。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;"><span
style="font-size:16px;line-height:28px;"><span
style="line-height:28px;">方式一</span>，</span></span><span
style="font-size:12px;line-height:19px;">Running services</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;">通过手机上Running
services的Activity查看，可以通过Setting-\>Applications-\>Running
services进。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;">关于</span><span
style="font-size:12px;line-height:19px;">Running
services的详细内容请参考《</span>**[Android中使用"running
services"查看service进程内存](http://hubingforever.blog.163.com/blog/static/17104057920114201075692/ "阅读全文")**<span
style="font-size:12px;line-height:19px;">》</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;"><span style="line-height:25px;"><span
style="font-size:16px;line-height:28px;">方式二</span><span
style="font-size:12px;line-height:21px;">，使用</span></span></span><span
style="font-size:12px;line-height:19px;">ActivityManager的</span><span
style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">[getMemoryInfo](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryInfo%28android.app.ActivityManager.MemoryInfo%29)</span>([ActivityManager.MemoryInfo](http://developer.android.com/reference/android/app/ActivityManager.MemoryInfo.html) outInfo)</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="font-size:12px;line-height:19px;">ActivityManager.getMemoryInfo()主要是用于得到当前系统剩余内存的及判断是否处于低内存运行。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">实例1：</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"></span>
<div style="color:#3366ff;line-height:21px;">

    private void displayBriefMemory() {    

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">       </span><span
style="color:#ff6600;line-height:21px;"> final ActivityManager
activityManager = (ActivityManager) getSystemService(ACTIVITY\_SERVICE);
   </span>

</div>

<div style="line-height:21px;">

<span style="color:#ff6600;line-height:21px;">       
ActivityManager.MemoryInfo info = new ActivityManager.MemoryInfo();
  </span>

</div>

<div style="line-height:21px;">

<span style="color:#ff6600;line-height:21px;">       
activityManager.getMemoryInfo(info);    </span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">       
Log.i(tag,"系统剩余内存:"+(</span><span
style="color:#ff6600;line-height:21px;">info.availMem</span><span
style="color:#3366ff;line-height:21px;"> \>\> 10)+"k");   </span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">       
Log.i(tag,"系统是否处于低内存运行："+</span><span
style="color:#ff6600;line-height:21px;">info.lowMemory</span><span
style="color:#3366ff;line-height:21px;">);</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">       
Log.i(tag,"当系统剩余内存低于"+</span><span
style="color:#ff6600;line-height:21px;">info.threshold</span><span
style="color:#3366ff;line-height:21px;">+"时就看成低内存运行");</span>

</div>

<div style="color:#3366ff;line-height:21px;">

    } 

</div>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="font-size:12px;line-height:19px;">ActivityManager.getMemoryInfo()是用ActivityManager.MemoryInfo返回结果，而不是Debug.MemoryInfo，他们不一样的。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#993300;line-height:21px;">ActivityManager.MemoryInfo</span><span
style="color:#ff6600;line-height:21px;">只有三个Field</span>:</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">availMem</span>:表示</span><span
style="font-size:12px;line-height:19px;">系统剩余内存</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">lowMemory</span>：它是boolean值，表示</span><span
style="font-size:12px;line-height:19px;">系统是否处于低内存运行</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">hreshold</span>：它表示</span><span
style="font-size:12px;line-height:19px;">当系统剩余内存低于好多时就看成低内存运行</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;white-space:nowrap;"><span
style="line-height:25px;"><span
style="font-size:16px;line-height:28px;">方式三</span></span><span
style="font-size:12px;line-height:21px;">，在代码中使用Debug的</span><span
style="font-size:12px;color:#ff6600;line-height:21px;">getMemoryInfo(Debug.MemoryInfo
memoryInfo</span><span
style="font-size:12px;line-height:21px;">)或ActivityManager的</span><span
style="font-size:12px;color:#ff6600;line-height:21px;">MemoryInfo[]
getProcessMemoryInfo(int[] pids)</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="font-size:12px;line-height:19px;white-space:nowrap;"></span>
<div style="line-height:21px;">

<span
style="color:#003366;line-height:21px;">该方式得到的MemoryInfo所描述的内存使用情况比较详细.数据的单位是</span><span
style="color:#ff6600;line-height:21px;">KＢ</span><span
style="color:#003366;line-height:21px;">.</span>

</div>

<div style="color:#003366;line-height:21px;">

MemoryInfo的Field如下

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">dalvikPrivateDirty</span><span
style="color:#003366;line-height:21px;">： </span><span
style="color:#000080;line-height:21px;">The private dirty pages used by
dalvik。</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">dalvikPss</span><span
style="color:#003366;line-height:21px;"> ：</span><span
style="color:#000080;line-height:21px;">The proportional set size for
dalvik.</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">dalvikSharedDirty </span><span
style="color:#003366;line-height:21px;">：</span><span
style="color:#000080;line-height:21px;">The shared dirty pages used by
dalvik.</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">nativePrivateDirty</span> <span
style="color:#003366;line-height:21px;">：</span><span
style="color:#000080;line-height:21px;">The private dirty pages used by
the </span><span style="color:#ff6600;line-height:21px;">native
heap</span><span style="color:#993300;line-height:21px;">.</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">nativePss</span> <span
style="color:#003366;line-height:21px;">：</span><span
style="color:#000080;line-height:21px;">The proportional set size for
the native heap.</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">nativeSharedDirty</span><span
style="color:#003366;line-height:21px;"> ：</span><span
style="color:#000080;line-height:21px;">The shared dirty pages used by
the </span><span style="color:#ff6600;line-height:21px;">native
heap.</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">otherPrivateDirty</span> <span
style="color:#003366;line-height:21px;">：</span><span
style="color:#000080;line-height:21px;">The private dirty pages used by
everything else.</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">otherPss</span><span
style="color:#003366;line-height:21px;"> ：</span><span
style="color:#000080;line-height:21px;">The proportional set size for
everything else.</span>

</div>

<div style="line-height:21px;">

<span style="line-height:21px;">otherSharedDirty</span><span
style="color:#003366;line-height:21px;"> ：</span><span
style="color:#000080;line-height:21px;">The shared dirty pages used by
everything else.</span>

</div>

<div style="line-height:21px;">

<span
style="font-size:14px;line-height:22px;font-family:Arial, Helvetica, sans-serif;white-space:normal;"><span
style="color:#003366;line-height:25px;"></span></span>
<div
style="line-height:22px;font-family:Arial, sans-serif, Helvetica, Tahoma;">

<span
style="font-size:12px;line-height:19px;">Android和Linux一样有大量内存在进程之间进程共享。某个进程准确的使用好多内存实际上是很难统计的。</span>

</div>

<div style="line-height:22px;">

<span
style="line-height:22px;font-family:Arial, sans-serif, Helvetica, Tahoma;"><span
style="font-size:12px;line-height:19px;">因为有paging out to
disk（换页），所以如果你把所有映射到进程的内存相加，它可能大于你的内存的实际物理大小。</span></span>

</div>

</div>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="line-height:19px;"><span
style="color:#003366;line-height:21px;">dalvik</span><span
style="color:#003366;line-height:21px;">：</span><span
style="color:#000080;line-height:21px;">是指</span></span></span><span
style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="line-height:19px;"><span
style="color:#000080;line-height:21px;">dalvik所使用的内存</span><span
style="color:#003366;line-height:21px;">。</span></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="line-height:19px;"><span
style="color:#003366;line-height:21px;">native</span><span
style="color:#003366;line-height:21px;">：</span><span
style="color:#000080;line-height:21px;">是被native堆使用的内存。应该指使用C\\C++在堆上分配的</span></span></span><span
style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#000080;line-height:21px;">内存</span><span
style="color:#003366;line-height:21px;">。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#003366;line-height:21px;">other:</span><span
style="color:#000080;line-height:21px;">是指除</span></span><span
style="font-size:12px;color:#000080;line-height:19px;white-space:nowrap;">dalvik和</span><span
style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#000080;line-height:21px;">native使用的内存。但是具体是指什么呢？至少包括在C\\C++分配的非堆内存，比如分配在栈上的内存。</span><span
style="color:#ff6600;line-height:21px;">puzlle!</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#003366;line-height:21px;"><span
style="line-height:21px;">private</span>:</span><span
style="color:#000080;line-height:21px;">是指私有的。非共享的。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#003366;line-height:21px;"><span
style="line-height:21px;">share</span>:</span><span
style="color:#000080;line-height:21px;">是指共享的内存</span><span
style="color:#003366;line-height:21px;">。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="font-size:12px;color:#003366;line-height:19px;white-space:nowrap;"><span
style="line-height:21px;">PSS</span>：</span><span
style="line-height:23px;font-family:Simsun;"><span
style="color:#000080;line-height:25px;">实际使用的物理内存（比例分配共享库占用的内存）</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:25px;font-family:Simsun;"><span
style="line-height:25px;font-family:Arial, Helvetica, sans-serif;"></span></span>
<div
style="line-height:22px;font-family:Arial, sans-serif, Helvetica, Tahoma;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#003366;line-height:21px;"><span
style="line-height:21px;">Pss</span></span>：<span
style="color:#000080;line-height:21px;">它是把共享内存根据一定比例分摊到共享它的各个进程来计算所得到进程使用内存。网上又说是</span></span><span
style="color:#000080;line-height:25px;"><span
style="line-height:22px;font-family:Simsun;">比例分配共享库占用的内存，</span><span
style="font-size:12px;line-height:19px;">那么至于这里的共享是否只是库的共享，还是不清楚。</span></span>

</div>

<div
style="line-height:22px;font-family:Arial, sans-serif, Helvetica, Tahoma;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#003366;line-height:21px;"><span
style="line-height:21px;"> PrivateDirty</span></span>：<span
style="color:#000080;line-height:21px;">它是指非共享的，又不能换页出去（</span></span><span
style="color:#000080;line-height:25px;"><span
style="font-size:12px;line-height:19px;">can not be paged to
disk </span><span
style="font-size:12px;line-height:19px;">）的内存的大小。比如Linux为了提高分配内存速度而缓冲的小对象，即使你的进程结束，该内存也不会释放掉，它只是又重新回到缓冲中而已。</span></span>

</div>

<div
style="line-height:22px;font-family:Arial, sans-serif, Helvetica, Tahoma;">

<span style="color:#000080;line-height:25px;"><span
style="font-size:12px;line-height:19px;"><span
style="line-height:19px;">**SharedDirty:**参照</span></span></span><span
style="font-size:12px;color:#003366;line-height:19px;"><span
style="line-height:19px;">PrivateDirty</span><span
style="line-height:19px;">我认为</span></span><span
style="font-size:12px;line-height:19px;"><span
style="color:#000080;line-height:19px;">它应该是指共享的，又不能换页出去（</span></span><span
style="color:#000080;line-height:22px;"><span
style="font-size:12px;line-height:19px;">can not be paged to
disk </span><span
style="font-size:12px;line-height:19px;">）的内存的大小。比如Linux为了提高分配内存速度而缓冲的小对象，即使所有共享它的进程结束，该内存也不会释放掉，它只是又重新回到缓冲中而已。</span></span>

</div>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:25px;font-family:Simsun;"><span
style="line-height:23px;"><span
style="color:#003366;line-height:25px;">具体代码请参考</span><span
style="color:#993300;line-height:25px;">实例1</span></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:25px;font-family:Simsun;"><span
style="line-height:25px;"><span
style="font-size:12px;line-height:22px;font-family:Arial, sans-serif, Helvetica, Tahoma;white-space:nowrap;">注意１</span></span><span
style="line-height:23px;">：</span></span><span
style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#0000ff;line-height:21px;">MemoryInfo所描述的内存使用情况都可以通过命令</span><span
style="color:#ff6600;line-height:21px;">adb shell "dumpsys meminfo
%curProcessName%"</span><span
style="color:#0000ff;line-height:21px;"> 得到</span>。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

eg ： adb shell "dumpsys meminfo proj.syjt

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="line-height:21px;">注意２：</span><span
style="color:#0000ff;line-height:21px;">如果想在代码中同时得到多个进程的内存使用或非本进程的内存使用情况请使用</span></span><span
style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#0000ff;line-height:21px;">ActivityManager的</span><span
style="color:#ff6600;line-height:19px;">MemoryInfo[]
getProcessMemoryInfo(int[] pids)，</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#0000ff;line-height:19px;">否则</span></span><span
style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#0000ff;line-height:21px;">Debug的</span><span
style="color:#ff6600;line-height:19px;">getMemoryInfo(Debug.MemoryInfo
memoryInfo</span>)<span
style="color:#0000ff;line-height:21px;">就可以了</span>。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">注意３：</span><span
style="color:#000080;line-height:21px;">可以通过ActivityManager的</span></span><span
style="line-height:25px;font-family:Arial, Helvetica, sans-serif;">[List](http://developer.android.com/reference/java/util/List.html)\<[ActivityManager.RunningAppProcessInfo](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html)\> <span
style="line-height:25px;">[getRunningAppProcesses](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)</span>()<span
style="color:#000080;line-height:25px;">得到当前所有运行的进程信息</span>。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="font-size:12px;line-height:19px;">[ActivityManager.RunningAppProcessInfo](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html)<span
style="color:#000080;line-height:21px;">中就有进程的id，名字以及该进程包括的所有apk包名列表等</span>。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">注意4</span>：</span><span
style="font-size:12px;line-height:19px;white-space:nowrap;"><span
style="color:#003366;line-height:19px;">数据的单位是</span><span
style="color:#ff6600;line-height:19px;">KB</span><span
style="color:#003366;line-height:19px;">.</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;white-space:nowrap;"><span
style="line-height:19px;"><span style="line-height:25px;"><span
style="font-size:16px;line-height:28px;">方式4、</span></span><span
style="font-size:12px;color:#003366;line-height:21px;">使用Debug的getNativeHeapSize
()，getNativeHeapAllocatedSize ()，getNativeHeapFreeSize
()方法。</span></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;white-space:nowrap;"><span
style="line-height:19px;"><span
style="font-size:12px;color:#003366;line-height:21px;">该方式只能得到Native堆的内存大概情况，数据单位为字节。</span></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;white-space:nowrap;"><span
style="line-height:19px;"><span
style="font-size:12px;line-height:21px;">static long <span
style="color:#993300;line-height:21px;"><span
style="line-height:21px;">[getNativeHeapAllocatedSize](http://developer.android.com/reference/android/os/Debug.html#getNativeHeapAllocatedSize%28%29)</span>() </span></span></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;white-space:nowrap;"><span
style="line-height:19px;"><span
style="font-size:12px;color:#003366;line-height:21px;">Returns the
amount of allocated memory in the native heap.</span></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:25px;"><span
style="line-height:25px;">返回的是当前进程navtive堆中<span
style="color:#ff6600;line-height:21px;">已使用的内存大小</span>\
 static long <span
style="line-height:21px;">[getNativeHeapFreeSize](http://developer.android.com/reference/android/os/Debug.html#getNativeHeapFreeSize%28%29)</span>()</span></span>
<div
style="font-size:12px;color:#003366;line-height:19px;font-family:Arial, sans-serif, Helvetica, Tahoma;white-space:nowrap;">

Returns the amount of free memory in the native heap.

</div>

<div
style="font-size:12px;line-height:19px;font-family:Arial, sans-serif, Helvetica, Tahoma;white-space:nowrap;">

<span
style="color:#003366;line-height:21px;">返回的是当前进程navtive堆中已经</span><span
style="color:#ff6600;line-height:21px;">剩余的内存大小</span>

</div>

static long <span
style="line-height:21px;">[getNativeHeapSize](http://developer.android.com/reference/android/os/Debug.html#getNativeHeapSize%28%29)</span>()
<div
style="font-size:12px;color:#003366;line-height:19px;font-family:Arial, sans-serif, Helvetica, Tahoma;white-space:nowrap;">

Returns the size of the native heap.

</div>

<div
style="font-size:12px;line-height:19px;font-family:Arial, sans-serif, Helvetica, Tahoma;white-space:nowrap;">

<span
style="color:#003366;line-height:21px;">返回的是当前进程navtive堆本身</span><span
style="color:#ff6600;line-height:21px;">总的内存大小</span>

</div>

<div
style="font-size:12px;line-height:19px;font-family:Arial, sans-serif, Helvetica, Tahoma;white-space:nowrap;">

<span style="line-height:21px;">示例代码：</span>

</div>

<div style="line-height:25px;">

<span
style="line-height:25px;font-family:Arial, sans-serif, Helvetica, Tahoma;"></span>
<div
style="font-size:12px;color:#0000ff;line-height:19px;white-space:nowrap;">

         
Log.i(tag,"NativeHeapSizeTotal:"+(Debug.getNativeHeapSize()\>\>10));

</div>

<div
style="font-size:12px;color:#0000ff;line-height:19px;white-space:nowrap;">

         
Log.i(tag,"NativeAllocatedHeapSize:"+(Debug.getNativeHeapAllocatedSize()\>\>10));

</div>

<div
style="font-size:12px;color:#0000ff;line-height:19px;white-space:nowrap;">

         
Log.i(tag,"NativeAllocatedFree:"+(Debug.getNativeHeapFreeSize()\>\>10));

</div>

<div style="font-size:12px;line-height:19px;white-space:nowrap;">

<span style="line-height:21px;">注意</span><span
style="color:#000080;line-height:21px;">：DEBUG中居然没有与上面相对应的关于<span
style="font-size:14px;line-height:22px;"><span
style="font-size:16px;line-height:28px;"><span
style="font-size:12px;line-height:19px;"><span
style="line-height:19px;">dalvik</span><span
style="line-height:19px;">的函数</span><span
style="line-height:19px;">。</span></span></span></span></span>

</div>

<div style="line-height:19px;white-space:nowrap;">

<span style="line-height:25px;"><span
style="font-size:16px;line-height:28px;">方式五</span></span><span
style="font-size:12px;color:#0000ff;line-height:21px;">、使用</span><span
style="font-size:12px;color:#ff6600;line-height:21px;">dumpsys
meminfo命令。</span>

</div>

<div style="line-height:19px;white-space:nowrap;">

<span style="color:#003366;line-height:25px;"><span
style="font-size:12px;line-height:21px;">我们可以在adb shell
中运行</span><span style="font-size:12px;line-height:19px;">dumpsys
meminfo命令来得到进程的内存信息。在该命令的后面要加上进程的名字，以确定是哪个进程。</span></span>

</div>

<div style="line-height:19px;white-space:nowrap;">

<span style="color:#003366;line-height:25px;"><span
style="font-size:12px;line-height:19px;">比如</span></span><span
style="font-size:12px;line-height:19px;white-space:normal;">"adb shell
dumpsys meminfo </span><span
style="font-size:12px;color:#993300;line-height:19px;white-space:normal;">com.teleca.robin.test</span><span
style="font-size:12px;line-height:21px;white-space:normal;">"<span
style="color:#003366;line-height:21px;"> 将得到<span
style="color:#993300;line-height:21px;">com.teleca.robin.test</span>进程使用的内存的信息:</span> </span>

</div>

</div>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="line-height:25px;font-family:Arial, sans-serif, Helvetica, Tahoma;"><span
style="font-size:12px;line-height:19px;"></span></span>
<div style="color:#3366ff;line-height:21px;">

Applications Memory Usage (kB):

</div>

<div style="color:#3366ff;line-height:21px;">

Uptime: 12101826 Realtime: 270857936

</div>

<div style="color:#3366ff;line-height:21px;">

\

</div>

<div style="color:#3366ff;line-height:21px;">

\*\* MEMINFO in pid 3407 [com.teleca.robin.test] \*\*

</div>

<div style="color:#3366ff;line-height:21px;">

                    native   dalvik    other    total

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">            </span><span
style="color:#ff6600;line-height:21px;">size</span><span
style="color:#3366ff;line-height:21px;">:     3456     3139      N/A    
6595</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">       </span><span
style="color:#ff6600;line-height:21px;">allocated</span><span
style="color:#3366ff;line-height:21px;">:     3432     2823      N/A    
6255</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">            </span><span
style="color:#ff6600;line-height:21px;">free</span><span
style="color:#3366ff;line-height:21px;">:       23      316      N/A    
 339</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">           </span><span
style="color:#ff6600;line-height:21px;">(Pss)</span><span
style="color:#3366ff;line-height:21px;">:      724     1101     1070    
2895</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  </span><span
style="color:#ff6600;line-height:21px;">(shared dirty)</span><span
style="color:#3366ff;line-height:21px;">:     1584     4540     1668    
7792</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">    </span><span
style="color:#ff6600;line-height:21px;">(priv dirty)</span><span
style="color:#3366ff;line-height:21px;">:      644      608      688    
1940</span>

</div>

<div style="color:#3366ff;line-height:21px;">

 

</div>

<div style="color:#3366ff;line-height:21px;">

 Objects

</div>

<div style="color:#3366ff;line-height:21px;">

           Views:        0        ViewRoots:        0

</div>

<div style="color:#3366ff;line-height:21px;">

     AppContexts:        0       Activities:        0

</div>

<div style="color:#3366ff;line-height:21px;">

          Assets:        3    AssetManagers:        3

</div>

<div style="color:#3366ff;line-height:21px;">

   Local Binders:        5    Proxy Binders:       11

</div>

<div style="color:#3366ff;line-height:21px;">

Death Recipients:        0

</div>

<div style="color:#3366ff;line-height:21px;">

 OpenSSL Sockets:        0

</div>

<div style="color:#3366ff;line-height:21px;">

 

</div>

<div style="color:#3366ff;line-height:21px;">

 SQL

</div>

<div style="color:#3366ff;line-height:21px;">

            heap:        0       memoryUsed:        0

</div>

<div style="color:#3366ff;line-height:21px;">

pageCacheOverflo:        0  largestMemAlloc:        0

</div>

<div style="color:#3366ff;line-height:21px;">

 

</div>

<div style="color:#3366ff;line-height:21px;">

 

</div>

<div style="color:#3366ff;line-height:21px;">

 Asset Allocations

</div>

<div style="color:#3366ff;line-height:21px;">

    zip:/data/app/com.teleca.robin.test-1.apk:/resources.arsc: 1K

</div>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#000080;line-height:21px;"> "size"
表示的是总内存大小（kb）。, "allocated"
表示的是已使用了的内存大小（kb），, "free"表示的是剩余的内存大小（kb）,
更多的可以参照</span><span
style="line-height:21px;">方式</span>三和<span
style="line-height:21px;">方式四</span><span
style="color:#0000ff;line-height:21px;">中的描述</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#0000ff;line-height:21px;">现在已经有了自动提取汇总</span></span><span
style="font-size:12px;color:#003366;line-height:19px;white-space:nowrap;">dumpsys
meminfo信息的工具，具体请参照《</span>**[Android内存泄露利器（内存统计篇）](http://hubingforever.blog.163.com/blog/static/17104057920114249163667/ "阅读全文")**<span
style="font-size:12px;color:#003366;line-height:19px;white-space:nowrap;">》及其系列文章。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="line-height:19px;white-space:nowrap;">**方式六、**</span><span
style="line-height:19px;white-space:nowrap;"><span
style="font-size:13px;line-height:23px;">使用</span></span><span
style="font-size:12px;line-height:19px;"> "adb shell
procrank"命令</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="color:#003366;line-height:25px;"><span
style="font-size:12px;line-height:19px;">如果你想查看所有进程的内存使用情况，可以使用</span><span
style="font-size:12px;line-height:19px;">"adb shell
procrank"命令。命令返回将如下：</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<div style="line-height:25px;">

<span
style="line-height:25px;font-family:Arial, sans-serif, Helvetica, Tahoma;"><span
style="font-size:12px;line-height:19px;"></span></span>
<div style="line-height:21px;">

<div style="line-height:21px;">

  PID      Vss      Rss      Pss      Uss  cmdline

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  188   75832K   51628K  
24824K   19028K  system\_server</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  308   50676K   26476K  
 9839K    6844K  system\_server</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 2834   35896K   31892K  
 9201K    6740K  com.sec.android.app.twlauncher</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  265   28536K   28532K  
 7985K    5824K  com.android.phone</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  100   29052K   29048K  
 7299K    4984K  zygote</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  258   27128K   27124K  
 7067K    5248K  com.swype.android.inputmethod</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  270   25820K   25816K  
 6752K    5420K  com.android.kineto</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 1253   27004K   27000K  
 6489K    4880K  com.google.android.voicesearch</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 2898   26620K   26616K  
 6204K    3408K  com.google.android.apps.maps:FriendService</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  297   26180K   26176K  
 5886K    4548K  com.google.process.gapps</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 3157   24140K   24136K  
 5191K    4272K  android.process.acore</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 2854   23304K   23300K  
 4067K    2788K  com.android.vending</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 3604   22844K   22840K  
 4036K    3060K  com.wssyncmldm</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  592   23372K   23368K  
 3987K    2812K  com.google.android.googlequicksearchbox</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 3000   22768K   22764K  
 3844K    2724K  com.tmobile.selfhelp</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;">  101    8128K    8124K  
 3649K    2996K  /system/bin/mediaserver</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 3473   21792K   21784K  
 3103K    2164K  com.android.providers.calendar</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> </span><span
style="color:#ff6600;line-height:21px;">3407   22092K   22088K    2982K
   1980K  com.teleca.robin.test</span>

</div>

<div style="line-height:21px;">

<span style="color:#3366ff;line-height:21px;"> 2840   21380K   21376K  
 2953K    1996K  com.sec.android.app.controlpanel</span>

</div>

</div>

<div style="line-height:21px;">

......................................................................................................................

</div>

</div>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#800000;line-height:21px;">关于VSS,RSS,PSS,USS的意义请参考</span>《</span>**[Android内存之VSS/RSS/PSS/USS](http://hubingforever.blog.163.com/blog/static/17104057920114411313717/ "阅读全文")**<span
style="font-size:12px;line-height:19px;">》</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="font-size:14px;line-height:22px;"><span
style="font-size:12px;line-height:19px;"><span
style="line-height:19px;">注意1</span>：这里的PSS和</span><span
style="font-size:12px;line-height:19px;"><span
style="line-height:19px;">方式四</span>PSS的total并不一致，有细微的差别。为什么呢？这是因为</span><span
style="font-size:12px;line-height:19px;">procrank 命令和</span><span
style="font-size:12px;line-height:19px;">meminfo命令使用的内核机制不太一样，所以结果会有细微差别</span></span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">注意2</span>：这里的<span
style="color:#ff6600;line-height:21px;">Uss </span>和<span
style="line-height:21px;">方式四</span>的Priv
Dirtyd的total几乎相等.他们似乎表示的是同一个意义。但是现在得到的关于它们的意义的解释却不太相同。难道这里Private的都是dirty(这里指不能换页)? <span
style="color:#ff6600;line-height:21px;">Puzzle!</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;">**方式七、**<span
style="font-size:13px;color:#003366;line-height:23px;">使用</span></span><span
style="font-size:12px;line-height:19px;"><span
style="color:#003366;line-height:21px;">"adb shell cat /proc/meminfo"
命令</span>。</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="color:#000080;line-height:21px;">该方式只能得出系统整个内存的大概使用情况。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;">MemTotal:         395144
kB </span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;">MemFree:          184936
kB </span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;">Buffers:             880
kB </span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;">Cached:            84104
kB </span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;">SwapCached:            0
kB </span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="font-size:12px;line-height:19px;">................................................................................................</span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">MemTotal </span>：<span
style="color:#000080;line-height:21px;">可供系统和用户使用的总内存大小 (它比实际的物理内存要小，因为还有些内存要用于radio,
DMA buffers, 等). </span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">MemFree</span>：<span
style="color:#000080;line-height:21px;">剩余的可用内存大小。这里该值比较大，实际上一般Android
system
的该值通常都很小，因为我们尽量让进程都保持运行，这样会耗掉大量内存</span><span
style="color:#0000ff;line-height:21px;">。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">Cached</span>: <span
style="color:#000080;line-height:21px;">这个是系统用于文件缓冲等的内存.
通常systems需要20MB 以避免bad paging states;。当内存紧张时，the Android
out of memory killer将杀死一些</span></span><span
style="font-size:12px;color:#000080;line-height:19px;">background</span><span
style="font-size:12px;line-height:19px;"><span
style="color:#000080;line-height:21px;">进程，以避免他们消耗过多的cached
RAM ，当然如果下次再用到他们，</span><span
style="color:#ff6600;line-height:21px;">就需要paging.
那么是说</span></span><span
style="color:#ff6600;line-height:25px;"><span
style="font-size:12px;line-height:19px;">background</span><span
style="font-size:12px;line-height:19px;">进程的内存包含在该项中吗？</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;">**方式八，**<span
style="font-size:13px;line-height:23px;">使用“adb shell
ps -x”命令</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial, sans-serif, Helvetica, Tahoma;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span style="line-height:19px;"><span
style="font-size:13px;line-height:23px;">该方式主要得到的是内存信息是VSIZE
和RSS。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<div style="font-size:13px;line-height:23px;">

<span
style="color:#993300;line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">USER
    PID   PPID  VSIZE  RSS     WCHAN    PC         NAME</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">.........................省略.................................</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="color:#ff6600;line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">app\_70
   3407  100   267104 22056 ffffffff afd0eb18 S com.teleca.robin.test
(u:55, s:12)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">app\_7
    3473  100   268780 21784 ffffffff afd0eb18 S
com.android.providers.calendar (u:16, s:8)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">radio
    3487  100   267980 21140 ffffffff afd0eb18 S com.osp.app.signin
(u:11, s:12)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">system
   3511  100   273232 22024 ffffffff afd0eb18 S com.android.settings
(u:11, s:4)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">app\_15
   3546  100   267900 20300 ffffffff afd0eb18 S
com.sec.android.providers.drm (u:15, s:6)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">app\_59
   3604  100   272028 22856 ffffffff afd0eb18 S com.wssyncmldm (u:231,
s:54)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">root
     4528  2     0      0     c0141e4c 00000000 S flush-138:13 (u:0,
s:0)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">root
     4701  152   676    336   c00a68c8 afd0e7cc S /system/bin/sh (u:0,
s:0)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">root
     4702  4701  820    340   00000000 afd0d8bc R ps (u:0, s:5)</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;"><span
style="line-height:23px;">VSZIE</span>:意义暂时不明。</span>

</div>

<div style="font-size:13px;line-height:23px;">

<span
style="line-height:23px;font-family:Arial, sans-serif, Helvetica, Tahoma;">VSS：请</span><span
style="font-size:14px;line-height:22px;font-family:Arial, sans-serif, Helvetica, Tahoma;"><span
style="font-size:12px;line-height:19px;"><span
style="color:#800000;line-height:19px;">参考</span>《</span></span>**[Android内存之VSS/RSS/PSS/USS](http://hubingforever.blog.163.com/blog/static/17104057920114411313717/ "阅读全文")**<span
style="font-size:12px;line-height:19px;font-family:Arial, sans-serif, Helvetica, Tahoma;">》</span>

</div>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="line-height:25px;font-family:Arial, sans-serif, Helvetica, Tahoma;"><span
style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">注意1</span>：由于RSS的价值不是很大，所以一般不用。</span></span>

</div>

<div
style="word-spacing:0px;font:14px/25px Arial;text-transform:none;color:#000000;text-indent:0px;white-space:normal;letter-spacing:normal;background-color:#ffffff;text-align:left;widows:2;orphans:2;webkit-text-size-adjust:auto;webkit-text-stroke-width:0px;">

<span
style="line-height:25px;font-family:Arial, sans-serif, Helvetica, Tahoma;"><span
style="font-size:12px;line-height:19px;"><span
style="line-height:21px;">注意2：</span>通过该命令提取RSS，已经有了工具，具体参照《</span></span>**[Android内存泄露利器（RSS内存统计篇）](http://hubingforever.blog.163.com/blog/static/17104057920113252542215/ "阅读全文")**<span
style="font-size:12px;line-height:19px;font-family:Arial, sans-serif, Helvetica, Tahoma;">》及其系列。</span>

</div>







